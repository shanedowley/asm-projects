; ----------------------------------------------------------------------------
; data.asm - Global data storage and lookup tables
; ----------------------------------------------------------------------------

        INCLUDE "constants.inc"

; ----------------------------------------------------------------------------
; Persistent state storage
; ----------------------------------------------------------------------------

        ; Ship state block
g_shipState:
        DEFS    SHIP_STATE_SIZE

        ; Asteroid pool
g_asteroids:
        DEFS    AST_STRUCT_SIZE * MAX_ASTEROIDS

        ; Bullet pool
g_bullets:
        DEFS    BUL_STRUCT_SIZE * MAX_BULLETS

; Control flags mask: bit0=left, bit1=right, bit2=thrust, bit3=fire, bit4=hyperspace
g_controlState:
        DEFB    0

g_frameLatch:
        DEFB    0

g_soundQueue:
        DEFB    0

g_waveNumber:
        DEFB    1

g_randSeed:
        DEFW    0xACE1                ; Default LFSR seed

; ----------------------------------------------------------------------------
; Lookup tables
; ----------------------------------------------------------------------------

yAddrTableLo:
        DEFB    0, 0, 0, 0, 0, 0, 0, 0, 32, 32, 32, 32, 32, 32, 32, 32
        DEFB    64, 64, 64, 64, 64, 64, 64, 64, 96, 96, 96, 96, 96, 96, 96, 96
        DEFB    128, 128, 128, 128, 128, 128, 128, 128, 160, 160, 160, 160, 160, 160, 160, 160
        DEFB    192, 192, 192, 192, 192, 192, 192, 192, 224, 224, 224, 224, 224, 224, 224, 224
        DEFB    0, 0, 0, 0, 0, 0, 0, 0, 32, 32, 32, 32, 32, 32, 32, 32
        DEFB    64, 64, 64, 64, 64, 64, 64, 64, 96, 96, 96, 96, 96, 96, 96, 96
        DEFB    128, 128, 128, 128, 128, 128, 128, 128, 160, 160, 160, 160, 160, 160, 160, 160
        DEFB    192, 192, 192, 192, 192, 192, 192, 192, 224, 224, 224, 224, 224, 224, 224, 224
        DEFB    0, 0, 0, 0, 0, 0, 0, 0, 32, 32, 32, 32, 32, 32, 32, 32
        DEFB    64, 64, 64, 64, 64, 64, 64, 64, 96, 96, 96, 96, 96, 96, 96, 96
        DEFB    128, 128, 128, 128, 128, 128, 128, 128, 160, 160, 160, 160, 160, 160, 160, 160
        DEFB    192, 192, 192, 192, 192, 192, 192, 192, 224, 224, 224, 224, 224, 224, 224, 224

yAddrTableHi:
        DEFB    64, 65, 66, 67, 68, 69, 70, 71, 64, 65, 66, 67, 68, 69, 70, 71
        DEFB    64, 65, 66, 67, 68, 69, 70, 71, 64, 65, 66, 67, 68, 69, 70, 71
        DEFB    64, 65, 66, 67, 68, 69, 70, 71, 64, 65, 66, 67, 68, 69, 70, 71
        DEFB    64, 65, 66, 67, 68, 69, 70, 71, 64, 65, 66, 67, 68, 69, 70, 71
        DEFB    72, 73, 74, 75, 76, 77, 78, 79, 72, 73, 74, 75, 76, 77, 78, 79
        DEFB    72, 73, 74, 75, 76, 77, 78, 79, 72, 73, 74, 75, 76, 77, 78, 79
        DEFB    72, 73, 74, 75, 76, 77, 78, 79, 72, 73, 74, 75, 76, 77, 78, 79
        DEFB    72, 73, 74, 75, 76, 77, 78, 79, 72, 73, 74, 75, 76, 77, 78, 79
        DEFB    80, 81, 82, 83, 84, 85, 86, 87, 80, 81, 82, 83, 84, 85, 86, 87
        DEFB    80, 81, 82, 83, 84, 85, 86, 87, 80, 81, 82, 83, 84, 85, 86, 87
        DEFB    80, 81, 82, 83, 84, 85, 86, 87, 80, 81, 82, 83, 84, 85, 86, 87
        DEFB    80, 81, 82, 83, 84, 85, 86, 87, 80, 81, 82, 83, 84, 85, 86, 87

sinTable:
        DEFB    0, 3, 6, 9, 12, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46
        DEFB    49, 51, 54, 57, 60, 63, 65, 68, 71, 73, 76, 78, 81, 83, 85, 88
        DEFB    90, 92, 94, 96, 98, 100, 102, 104, 106, 107, 109, 111, 112, 113, 115, 116
        DEFB    117, 118, 120, 121, 122, 122, 123, 124, 125, 125, 126, 126, 126, 127, 127, 127
        DEFB    127, 127, 127, 127, 126, 126, 126, 125, 125, 124, 123, 122, 122, 121, 120, 118
        DEFB    117, 116, 115, 113, 112, 111, 109, 107, 106, 104, 102, 100, 98, 96, 94, 92
        DEFB    90, 88, 85, 83, 81, 78, 76, 73, 71, 68, 65, 63, 60, 57, 54, 51
        DEFB    49, 46, 43, 40, 37, 34, 31, 28, 25, 22, 19, 16, 12, 9, 6, 3
        DEFB    0, 253, 250, 247, 244, 240, 237, 234, 231, 228, 225, 222, 219, 216, 213, 210
        DEFB    207, 205, 202, 199, 196, 193, 191, 188, 185, 183, 180, 178, 175, 173, 171, 168
        DEFB    166, 164, 162, 160, 158, 156, 154, 152, 150, 149, 147, 145, 144, 143, 141, 140
        DEFB    139, 138, 136, 135, 134, 134, 133, 132, 131, 131, 130, 130, 130, 129, 129, 129
        DEFB    129, 129, 129, 129, 130, 130, 130, 131, 131, 132, 133, 134, 134, 135, 136, 138
        DEFB    139, 140, 141, 143, 144, 145, 147, 149, 150, 152, 154, 156, 158, 160, 162, 164
        DEFB    166, 168, 171, 173, 175, 178, 180, 183, 185, 188, 191, 193, 196, 199, 202, 205
        DEFB    207, 210, 213, 216, 219, 222, 225, 228, 231, 234, 237, 240, 244, 247, 250, 253

cosTable:
        DEFB    127, 127, 127, 127, 126, 126, 126, 125, 125, 124, 123, 122, 122, 121, 120, 118
        DEFB    117, 116, 115, 113, 112, 111, 109, 107, 106, 104, 102, 100, 98, 96, 94, 92
        DEFB    90, 88, 85, 83, 81, 78, 76, 73, 71, 68, 65, 63, 60, 57, 54, 51
        DEFB    49, 46, 43, 40, 37, 34, 31, 28, 25, 22, 19, 16, 12, 9, 6, 3
        DEFB    0, 253, 250, 247, 244, 240, 237, 234, 231, 228, 225, 222, 219, 216, 213, 210
        DEFB    207, 205, 202, 199, 196, 193, 191, 188, 185, 183, 180, 178, 175, 173, 171, 168
        DEFB    166, 164, 162, 160, 158, 156, 154, 152, 150, 149, 147, 145, 144, 143, 141, 140
        DEFB    139, 138, 136, 135, 134, 134, 133, 132, 131, 131, 130, 130, 130, 129, 129, 129
        DEFB    129, 129, 129, 129, 130, 130, 130, 131, 131, 132, 133, 134, 134, 135, 136, 138
        DEFB    139, 140, 141, 143, 144, 145, 147, 149, 150, 152, 154, 156, 158, 160, 162, 164
        DEFB    166, 168, 171, 173, 175, 178, 180, 183, 185, 188, 191, 193, 196, 199, 202, 205
        DEFB    207, 210, 213, 216, 219, 222, 225, 228, 231, 234, 237, 240, 244, 247, 250, 253
        DEFB    0, 3, 6, 9, 12, 16, 19, 22, 25, 28, 31, 34, 37, 40, 43, 46
        DEFB    49, 51, 54, 57, 60, 63, 65, 68, 71, 73, 76, 78, 81, 83, 85, 88
        DEFB    90, 92, 94, 96, 98, 100, 102, 104, 106, 107, 109, 111, 112, 113, 115, 116
        DEFB    117, 118, 120, 121, 122, 122, 123, 124, 125, 125, 126, 126, 126, 127, 127, 127

squareTable:
        DEFW    0, 1, 4, 9, 16, 25, 36, 49
        DEFW    64, 81, 100, 121, 144, 169, 196, 225
        DEFW    256, 289, 324, 361, 400, 441, 484, 529
        DEFW    576, 625, 676, 729, 784, 841, 900, 961
        DEFW    1024, 1089, 1156, 1225, 1296, 1369, 1444, 1521
        DEFW    1600, 1681, 1764, 1849, 1936, 2025, 2116, 2209
        DEFW    2304, 2401, 2500, 2601, 2704, 2809, 2916, 3025
        DEFW    3136, 3249, 3364, 3481, 3600, 3721, 3844, 3969
        DEFW    4096, 4225, 4356, 4489, 4624, 4761, 4900, 5041
        DEFW    5184, 5329, 5476, 5625, 5776, 5929, 6084, 6241
        DEFW    6400, 6561, 6724, 6889, 7056, 7225, 7396, 7569
        DEFW    7744, 7921, 8100, 8281, 8464, 8649, 8836, 9025
        DEFW    9216, 9409, 9604, 9801, 10000, 10201, 10404, 10609
        DEFW    10816, 11025, 11236, 11449, 11664, 11881, 12100, 12321
        DEFW    12544, 12769, 12996, 13225, 13456, 13689, 13924, 14161
        DEFW    14400, 14641, 14884, 15129, 15376, 15625, 15876, 16129
        DEFW    16384, 16641, 16900, 17161, 17424, 17689, 17956, 18225
        DEFW    18496, 18769, 19044, 19321, 19600, 19881, 20164, 20449
        DEFW    20736, 21025, 21316, 21609, 21904, 22201, 22500, 22801
        DEFW    23104, 23409, 23716, 24025, 24336, 24649, 24964, 25281
        DEFW    25600, 25921, 26244, 26569, 26896, 27225, 27556, 27889
        DEFW    28224, 28561, 28900, 29241, 29584, 29929, 30276, 30625
        DEFW    30976, 31329, 31684, 32041, 32400, 32761, 33124, 33489
        DEFW    33856, 34225, 34596, 34969, 35344, 35721, 36100, 36481
        DEFW    36864, 37249, 37636, 38025, 38416, 38809, 39204, 39601
        DEFW    40000, 40401, 40804, 41209, 41616, 42025, 42436, 42849
        DEFW    43264, 43681, 44100, 44521, 44944, 45369, 45796, 46225
        DEFW    46656, 47089, 47524, 47961, 48400, 48841, 49284, 49729
        DEFW    50176, 50625, 51076, 51529, 51984, 52441, 52900, 53361
        DEFW    53824, 54289, 54756, 55225, 55696, 56169, 56644, 57121
        DEFW    57600, 58081, 58564, 59049, 59536, 60025, 60516, 61009
        DEFW    61504, 62001, 62500, 63001, 63504, 64009, 64516, 65025

hudFont:
; Glyph 0: '0'
        DEFB    60, 102, 110, 118, 102, 102, 60, 0
; Glyph 1: '1'
        DEFB    24, 56, 24, 24, 24, 24, 126, 0
; Glyph 2: '2'
        DEFB    60, 102, 6, 12, 24, 48, 126, 0
; Glyph 3: '3'
        DEFB    60, 102, 6, 28, 6, 102, 60, 0
; Glyph 4: '4'
        DEFB    12, 28, 60, 108, 126, 12, 12, 0
; Glyph 5: '5'
        DEFB    126, 96, 124, 6, 6, 102, 60, 0
; Glyph 6: '6'
        DEFB    60, 96, 96, 124, 102, 102, 60, 0
; Glyph 7: '7'
        DEFB    126, 6, 12, 24, 48, 48, 48, 0
; Glyph 8: '8'
        DEFB    60, 102, 102, 60, 102, 102, 60, 0
; Glyph 9: '9'
        DEFB    60, 102, 102, 62, 6, 6, 60, 0
; Glyph 10: 'S'
        DEFB    62, 96, 96, 60, 6, 6, 124, 0
; Glyph 11: 'C'
        DEFB    60, 102, 96, 96, 96, 102, 60, 0
; Glyph 12: 'O'
        DEFB    60, 102, 102, 102, 102, 102, 60, 0
; Glyph 13: 'R'
        DEFB    124, 102, 102, 124, 108, 102, 102, 0
; Glyph 14: 'E'
        DEFB    126, 96, 96, 124, 96, 96, 126, 0
; Glyph 15: 'L'
        DEFB    96, 96, 96, 96, 96, 96, 126, 0
; Glyph 16: 'I'
        DEFB    126, 24, 24, 24, 24, 24, 126, 0
; Glyph 17: 'V'
        DEFB    102, 102, 102, 102, 102, 60, 24, 0
; Glyph 18: 'A'
        DEFB    24, 60, 102, 102, 126, 102, 102, 0
; Glyph 19: 'W'
        DEFB    102, 102, 102, 110, 126, 126, 102, 0
; Glyph 20: 'G'
        DEFB    60, 102, 96, 110, 102, 102, 60, 0
; Glyph 21: 'M'
        DEFB    102, 126, 126, 102, 102, 102, 102, 0
; Glyph 22: '-'
        DEFB    0, 0, 0, 126, 0, 0, 0, 0
; Glyph 23: ' '
        DEFB    0, 0, 0, 0, 0, 0, 0, 0
; Glyph 24: 'T'
        DEFB    126, 24, 24, 24, 24, 24, 24, 0
; Glyph 25: 'H'
        DEFB    102, 102, 102, 126, 102, 102, 102, 0
; Glyph 26: 'P'
        DEFB    124, 102, 102, 124, 96, 96, 96, 0
; Glyph 27: 'Q'
        DEFB    60, 102, 102, 102, 110, 60, 6, 0
; Glyph 28: 'U'
        DEFB    102, 102, 102, 102, 102, 102, 60, 0
; Glyph 29: 'F'
        DEFB    126, 96, 96, 124, 96, 96, 96, 0
; Glyph 30: '='
        DEFB    0, 126, 0, 0, 126, 0, 0, 0

